{
  "smoke": [
    {
      "name": "create-worktree-dry-run",
      "args": [
        "create-worktree",
        "--branch",
        "feat/issue-999-api",
        "--base",
        "main",
        "--dry-run"
      ],
      "timeout_sec": 10,
      "expect": {
        "exit_codes": [0],
        "stdout_regex": "feat__issue-999-api"
      }
    },
    {
      "name": "render-task-prompt",
      "args": [
        "render-task-prompt",
        "--issue",
        "999",
        "--task-id",
        "T1",
        "--summary",
        "Implement API validation",
        "--owner",
        "subagent-api",
        "--branch",
        "issue/999/t1-api",
        "--worktree",
        ".worktrees/issue/999-t1-api",
        "--execution-mode",
        "pr-isolated",
        "--pr-title",
        "feat(issue): implement API validation",
        "--acceptance",
        "Return stable error codes for invalid input"
      ],
      "timeout_sec": 10,
      "expect": {
        "exit_codes": [0],
        "stdout_regex": "(?s)## Assigned Execution Facts.*Assigned worktree: `\\.worktrees/issue/999-t1-api`.*Execution mode: `pr-isolated`.*validate-pr-body.*open-pr"
      }
    },
    {
      "name": "render-task-prompt-dry-run-issue-token",
      "args": [
        "render-task-prompt",
        "--issue",
        "DRY_RUN_PLAN_ISSUE",
        "--task-id",
        "T1",
        "--summary",
        "Render prompt for dry-run orchestration",
        "--owner",
        "subagent-api",
        "--branch",
        "issue/dry-run/t1-api",
        "--worktree",
        ".worktrees/issue/dry-run-t1-api",
        "--execution-mode",
        "per-sprint",
        "--pr-title",
        "feat(issue): dry run prompt"
      ],
      "timeout_sec": 10,
      "expect": {
        "exit_codes": [0],
        "stdout_regex": "(?s)Issue: `#DRY_RUN_PLAN_ISSUE`.*Execution mode: `per-sprint`"
      }
    },
    {
      "name": "render-task-prompt-fail-main-agent-owner",
      "args": [
        "render-task-prompt",
        "--issue",
        "999",
        "--task-id",
        "T1",
        "--summary",
        "Implement API validation",
        "--owner",
        "main-agent",
        "--branch",
        "issue/999/t1-api",
        "--worktree",
        ".worktrees/issue/999-t1-api",
        "--execution-mode",
        "pr-isolated",
        "--pr-title",
        "feat(issue): implement API validation"
      ],
      "timeout_sec": 10,
      "expect": {
        "exit_codes": [1],
        "stderr_regex": "owner must not be main-agent"
      }
    },
    {
      "name": "open-pr-dry-run",
      "args": [
        "open-pr",
        "--issue",
        "999",
        "--title",
        "feat: fixture",
        "--base",
        "main",
        "--head",
        "feat/issue-999-api",
        "--body-file",
        "tests/fixtures/issue/pr_body_valid.md",
        "--dry-run"
      ],
      "timeout_sec": 10,
      "expect": {
        "exit_codes": [0],
        "stdout_regex": "DRY-RUN-PR-URL"
      }
    },
    {
      "name": "validate-pr-body-fail-placeholder",
      "args": [
        "validate-pr-body",
        "--issue",
        "999",
        "--body-file",
        "tests/fixtures/issue/pr_body_invalid_placeholder.md"
      ],
      "timeout_sec": 10,
      "expect": {
        "exit_codes": [1],
        "stderr_regex": "invalid PR body content"
      }
    },
    {
      "name": "respond-review-dry-run",
      "args": [
        "respond-review",
        "--pr",
        "456",
        "--review-comment-url",
        "https://github.com/org/repo/pull/456#issuecomment-1",
        "--issue",
        "999",
        "--body",
        "Addressed feedback",
        "--dry-run"
      ],
      "timeout_sec": 10,
      "expect": {
        "exit_codes": [0],
        "stdout_regex": "DRY-RUN-PR-COMMENT-URL"
      }
    }
  ]
}
