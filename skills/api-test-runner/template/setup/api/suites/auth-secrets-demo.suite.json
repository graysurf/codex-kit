{
  "version": 1,
  "name": "auth-secrets-demo",
  "auth": {
    "provider": "rest",
    "secretEnv": "API_TEST_AUTH_JSON",
    "required": true,
    "rest": {
      "loginRequestTemplate": "setup/rest/requests/dummyjson.auth.login.template.request.json",
      "credentialsJq": ".profiles[$profile] | select(.) | { username, password }",
      "tokenJq": ".accessToken"
    }
  },
  "defaults": {
    "noHistory": true,
    "rest": { "url": "https://dummyjson.com", "token": "member" },
    "graphql": { "url": "https://countries.trevorblades.com/", "jwt": "member" }
  },
  "cases": [
    {
      "id": "rest.dummyjson.me.member",
      "type": "rest",
      "tags": ["demo", "auth", "secrets"],
      "allowWrite": false,
      "token": "member",
      "request": "setup/rest/requests/dummyjson.auth.me.generic.request.json"
    },
    {
      "id": "rest.dummyjson.me.admin",
      "type": "rest",
      "tags": ["demo", "auth", "secrets"],
      "allowWrite": false,
      "token": "admin",
      "request": "setup/rest/requests/dummyjson.auth.me.generic.request.json"
    },
    {
      "id": "graphql.countries.country.member",
      "type": "graphql",
      "tags": ["demo", "auth", "secrets"],
      "allowWrite": false,
      "jwt": "member",
      "op": "setup/graphql/operations/country.graphql",
      "vars": "setup/graphql/operations/country.variables.json",
      "expect": {
        "jq": "(.data.country.code == \"TW\") and ((.data.country.name | type) == \"string\") and ((.data.country.name | length) > 0)"
      }
    }
  ]
}
